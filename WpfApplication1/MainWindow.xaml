<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">
    <Window.CommandBindings>
        <CommandBinding Command="local:MainWindow.InstallPluginCommand" Executed="InstallPluginCommand_Executed" />
    </Window.CommandBindings>
    <DockPanel>
        <TextBox DockPanel.Dock="Bottom" HorizontalAlignment="Stretch" Name="txt" Margin="10" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Stretch" />
        <Grid DockPanel.Dock="Left" Width="200" >
            <Label>
                <Run Text="System" />
            </Label>
            <TreeView>
                <TreeViewItem IsSelected="True">
                    <TreeViewItem.Header>
                        <Label>
                            <Run Text="System" />
                        </Label>
                    </TreeViewItem.Header>
                    <TreeViewItem.Items>
                        <TreeViewItem>
                            <TreeViewItem.Header>
                                <Label>
                                    <Run>Interfaces</Run>
                                </Label>
                            </TreeViewItem.Header>
                        </TreeViewItem>
                    </TreeViewItem.Items>
                </TreeViewItem>
            </TreeView>
        </Grid>
        
        <Grid>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <DockPanel Grid.Column="0" HorizontalAlignment="Stretch">
                    <Label DockPanel.Dock="Top">
                        <Run Text="Availables Plugin" />
                    </Label>
                    <ListBox Name="lbAvailablePlugin" HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ItemsSource="{Binding Path=AvailablesPlugins}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <Grid.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="Install" Command="local:MainWindow.InstallPluginCommand" CommandParameter="{Binding Path=Id}" />
                                        </ContextMenu>
                                    </Grid.ContextMenu>
                                    <Label HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                        <Run Text="{Binding Path=Name, Mode=OneWay}" />
                                    </Label>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </DockPanel>
                <DockPanel Grid.Column="1">
                    <Label DockPanel.Dock="Top">
                        <Run Text="Installed plugins"/>
                    </Label>
                    <ListBox HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ItemsSource="{Binding Path=InstalledPlugins}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Label>
                                    <Run Text="{Binding Path=Name, Mode=OneWay}" />
                                </Label>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </DockPanel>
            </Grid>
        </Grid>
        
    </DockPanel>
</Window>
